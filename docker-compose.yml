image:  
  build: tractor
  #image: tractordocker_image # requires compose 1.6
  container_name: tractor_image
  volumes:
    - ./tractor/assets:/opt/pixar/assets:ro

data:
  image: tractordocker_image
  container_name: tractor_data
  hostname: tractor-data
  volumes:
    - ./tractor/assets:/opt/pixar/assets:ro
    - /var/spool/tractor

license:
  image: tractordocker_image
  container_name: pixar_license
  hostname: pixar-license
  restart: always
  #mac_address: xx:xx:xx:xx:xx:xx # could be used to set specific mac address
  ports:
    - "9010:9010"
  volumes_from:
    - data
  command: /opt/pixar/PixarLicense-LA-11.0/PixarLicenseServer -x /opt/pixar/assets/pixar.license -log /var/tmp/pixar-license.log

engine:
  image: tractordocker_image
  container_name: tractor_engine
  hostname: tractor-engine
  restart: always
  ports:
    - "80:80"
    - "9005:9005"
  links:
    - license
  volumes_from:
    - data
  command: /opt/pixar/Tractor-2.2/bin/tractor-engine --configdir=/opt/pixar/assets/custom_config --log=/var/tmp/engine.log --debug --verbose

blade:
  image: tractordocker_image
  container_name: tractor_blade # prevents scaling if uncommented
  hostname: tractor-blade
  restart: always
  links:
    - engine
  command: /opt/pixar/Tractor-2.2/bin/tractor-blade --log=/var/tmp/engine.log --engine=tractor-engine --debug --verbose
